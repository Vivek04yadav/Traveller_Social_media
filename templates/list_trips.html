<!DOCTYPE html>
<html>
<head>
    <title>All Trips</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:700,400&display=swap">
    <style>
        body { background: #18191a !important; color: #e0e0e0 !important; font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif; }
        .trip-search-bar {
            background: rgba(30,34,40,0.92);
            border-radius: 1.5rem;
            box-shadow: 0 4px 24px 0 rgba(31,38,135,0.13);
            padding: 1.2rem 2rem 1.2rem 2rem;
            margin-bottom: 2.2rem;
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }
        .trip-search-bar input {
            background: #23272b !important;
            color: #fff !important;
            border: 2px solid #4f8cff !important;
            border-radius: 0.75rem;
            font-size: 1.13rem;
            font-weight: 600;
            box-shadow: none;
            letter-spacing: 0.02em;
            flex: 1;
        }
        .trip-search-bar input:focus {
            border-color: #a6ffcb !important;
            background: #23272b !important;
            color: #fff !important;
        }
        .trip-search-bar button {
            background: linear-gradient(90deg,#4f8cff,#003366);
            color: #fff;
            border: none;
            border-radius: 0.75rem;
            font-weight: 800;
            font-size: 1.13rem;
            padding: 0.6rem 2rem;
            box-shadow: 0 2px 8px #0004;
            transition: background 0.2s, box-shadow 0.2s;
        }
        .trip-search-bar button:hover {
            background: linear-gradient(90deg,#a6ffcb,#4f8cff);
            color: #18191a;
            box-shadow: 0 4px 16px #4f8cff44;
        }
        .trip-card-pro {
            background: rgba(30,34,40,0.92);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.27);
            backdrop-filter: blur(10px);
            color: #fff !important;
            padding: 2rem 1.5rem 1.5rem 1.5rem;
            margin-bottom: 2rem;
            border: 1.5px solid #23272b;
            transition: box-shadow 0.2s, transform 0.2s;
        }
        .trip-card-pro:hover {
            box-shadow: 0 16px 48px 0 rgba(79,140,255,0.18), 0 2px 8px #0006;
            transform: translateY(-4px) scale(1.02);
        }
        .trip-card-title {
            font-size: 1.5rem;
            font-weight: 900;
            color: #4f8cff;
            margin-bottom: 0.3rem;
        }
        .trip-card-dates {
            color: #a6ffcb;
            font-size: 1.08rem;
            font-weight: 700;
            margin-bottom: 0.7rem;
        }
        .trip-card-desc {
            color: #e0e0e0;
            font-size: 1.08rem;
            margin-bottom: 0.7rem;
        }
        .trip-card-badges .badge {
            margin-right: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            background: #23272b;
            color: #a6ffcb;
            border: 1.5px solid #4f8cff;
        }
        .trip-card-actions .btn {
            margin-right: 0.5rem;
            margin-bottom: 0.3rem;
        }
        @media (max-width: 900px) {
            .trip-card-pro { padding: 1.2rem 1rem; }
        }
    </style>
</head>
<body class="bg-dark">
    {% include 'navbar.html' %}
    <div class="container mt-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 style="font-weight:900;color:#fff;text-shadow:0 2px 8px #000a;">All Trips</h2>
            <a href="{{ url_for('create_trip') }}" class="btn btn-primary" style="background:linear-gradient(90deg,#4f8cff,#003366);font-weight:800;font-size:1.13rem;border-radius:0.75rem;box-shadow:0 2px 8px #0004;"> <i class="fa fa-plus"></i> Create New Trip</a>
        </div>
        <form method="GET" action="{{ url_for('list_trips') }}" class="trip-search-bar">
            <input type="text" name="destination" placeholder="Search destination..." value="{{ request.args.get('destination', '') }}">
            <button type="submit"><i class="fa fa-search"></i> Search</button>
        </form>
        {% include 'flashes.html' %}
        <div class="row">
            {% for trip in trips %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="trip-card-pro h-100">
                        <div class="trip-card-title">{{ trip.destination }}</div>
                        <div class="trip-card-dates">{{ trip.start_date }} to {{ trip.end_date }}</div>
                        <div class="trip-card-desc">{{ trip.description }}</div>
                        <div class="trip-card-badges mb-2">
                            <span class="badge">By: {{ trip.creator }}</span>
                            <span class="badge">Participants: {{ trip.participants }}</span>
                        </div>
                        <div class="trip-card-actions d-flex flex-wrap">
                            <a href="{{ url_for('trip_details', trip_id=trip.trip_id) }}" class="btn btn-outline-info btn-sm"><i class="fa fa-eye"></i> View Details</a>
                            <a href="{{ url_for('invite_page', trip_id=trip.trip_id) }}" class="btn btn-outline-primary btn-sm"><i class="fa fa-user-plus"></i> Invite</a>
                            {% if session['username'] == trip.creator %}
                                <a href="{{ url_for('edit_trip', trip_id=trip.trip_id) }}" class="btn btn-outline-warning btn-sm"><i class="fa fa-edit"></i> Edit</a>
                                <form method="POST" action="{{ url_for('delete_trip', trip_id=trip.trip_id) }}" style="display:inline;">
                                    <button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('Are you sure you want to delete this trip?');"><i class="fa fa-trash"></i> Delete</button>
                                </form>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="col-12">
                    <div class="alert alert-info text-center">No trips found.</div>
                </div>
            {% endfor %}
        </div>
        <a href="{{ url_for('home') }}" class="btn btn-link mt-4">Back to Home</a>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
</body>
</html>
